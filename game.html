<!DOCTYPE html>
<html>
<head>
  <title>Flappy Bird - Shaurya's Workshop</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: url('https://i.ibb.co/xzZw2CC/background.png') no-repeat center;
      background-size: cover;
    }
    canvas {
      display: block;
      margin: auto;
    }
  </style>
</head>
<body>
<canvas id="game" width="320" height="480"></canvas>

<script>
  const canvas = document.getElementById("game");
  const ctx = canvas.getContext("2d");

  const birdImg = new Image();
  birdImg.src = "https://i.ibb.co/Qr9sXzB/bird.png"; // Chidiya ki image

  const bg = new Image();
  bg.src = "https://i.ibb.co/xzZw2CC/background.png"; // Background image

  const pipeTop = new Image();
  pipeTop.src = "https://i.ibb.co/NWcTXtJ/pipeTop.png";

  const pipeBottom = new Image();
  pipeBottom.src = "https://i.ibb.co/hyqrbcn/pipeBottom.png";

  const gap = 100;
  let bird = {
    x: 50,
    y: 150,
    gravity: 1.5,
    velocity: 0
  };

  let pipes = [];
  pipes[0] = {
    x: canvas.width,
    y: Math.floor(Math.random() * -150) - 50
  };

  let score = 0;
  let gameStarted = false;

  function draw() {
    ctx.drawImage(bg, 0, 0, canvas.width, canvas.height);

    for (let i = 0; i < pipes.length; i++) {
      ctx.drawImage(pipeTop, pipes[i].x, pipes[i].y);
      ctx.drawImage(pipeBottom, pipes[i].x, pipes[i].y + pipeTop.height + gap);

      pipes[i].x--;

      if (pipes[i].x === 150) {
        pipes.push({
          x: canvas.width,
          y: Math.floor(Math.random() * -150) - 50
        });
      }

      if (
        bird.x + birdImg.width >= pipes[i].x &&
        bird.x <= pipes[i].x + pipeTop.width &&
        (bird.y <= pipes[i].y + pipeTop.height || bird.y + birdImg.height >= pipes[i].y + pipeTop.height + gap)
      ) {
        location.reload(); // Game over
      }

      if (pipes[i].x === 5) {
        score++;
      }
    }

    ctx.drawImage(birdImg, bird.x, bird.y);

    if (gameStarted) {
      bird.velocity += bird.gravity;
      bird.y += bird.velocity;
    }

    if (bird.y + birdImg.height >= canvas.height) {
      location.reload(); // Game over if hits ground
    }

    ctx.fillStyle = "#fff";
    ctx.font = "20px Arial";
    ctx.fillText("Score: " + score, 10, canvas.height - 20);

    requestAnimationFrame(draw);
  }

  document.addEventListener("keydown", flap);
  document.addEventListener("touchstart", flap);

  function flap() {
    if (!gameStarted) {
      gameStarted = true;
      draw();
    }
    bird.velocity = -15;
  }
</script>
</body>
</html>
